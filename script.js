const translations = {
    'ko': {
        'menu.dashboard': '대시보드',
        'menu.buy': '구매하기',
        'menu.chart': '차트',
        'menu.features': '특징',
        'menu.vision': '비전',
        'button.connect_wallet': '지갑 연결',
        'button.get_started': '시작하기',
        'hero.subtitle': '글로벌 금융을 위한 새로운 기준',
        'hero.description': '양자 금융 기반 혁신적인 USDQS 스테이블코인 플랫폼\n독자적인 금융 결제 시스템 확보 • 글로벌 디지털 기축통화 구축\n전 세계가 신뢰하는 차세대 디지털 생태계 • 완벽한 자산 담보 • 글로벌 금융 혁신의 시작',
        'button.start_usdg': 'USDQS 시작하기',
        'button.learn_more': '자세히 보기',
        'section.buy_usdg': '구매하기',
        'label.usd_amount': 'USD 금액 입력:',
        'button.buy': '구매하기',
        'section.price_trend': '시세 동향',
        'section.dashboard': '실시간 대시보드',
        'dashboard.total_supply': '총 발행량',
        'dashboard.initial_scale': '초기 발행 규모',
        'dashboard.trading_volume': '24시간 거래량',
        'dashboard.market_liquidity': '활발한 시장 유동성',
        'dashboard.asset_backing': '자산 담보율',
        'dashboard.transparent_custody': '글로벌 감사기관의 투명한 보관',
        'dashboard.integrated_platforms': '연동 플랫폼',
        'dashboard.partnership_ecosystem': '다양한 파트너와 함께하는 생태계',
        'section.features': '의 핵심 특징',
        'feature.usd_backing.title': 'USD 기반 담보',
        'feature.usd_backing.description': 'HKMA 인증하에 거대한 USD 실물 자산 안전 담보',
        'feature.global_payment.title': '글로벌 결제',
        'feature.global_payment.description': '전 세계 송금, 투자, 결제 서비스 통합 플랫폼',
        'feature.regulatory.title': '규제 준수',
        'feature.regulatory.description': 'ODI 규제 완전 준수 및 국제 신뢰도 확보',
        'feature.stability.title': '안정성',
        'feature.stability.description': '1:1 USD 페깅 유지 및 실시간 투명 감사',
        'feature.scalability.title': '확장성',
        'feature.scalability.description': '아시아를 넘어 글로벌 디지털 달러 허브 구축',
        'feature.mxly_integration.title': 'MXLY 연동',
        'feature.mxly_integration.description': 'MXLY 토큰과 연동하여 시너지 효과 극대화',
        'feature.quantum_security.title': '양자 내성 보안',
        'feature.quantum_security.description': '양자 내성 암호화 기술과 서명을 통해 해킹과 변조 방지',
        'feature.reliability.title': '신뢰성 및 호환성',
        'feature.reliability.description': '양자 보안으로 블록체인 지갑 및 거래소와의 호환 안전성 강화',
        'section.vision': '의 비전',
        'vision.phase1.title': 'Phase 1',
        'vision.phase1.subtitle': '안정적 발행',
        'vision.phase1.description': '홍콩 기반 USDQS 스테이블코인을 안정적으로 발행합니다.',
        'vision.phase2.title': 'Phase 2',
        'vision.phase2.subtitle': '플랫폼 연계',
        'vision.phase2.description': '다양한 금융 상품과 연동하여 USDQS 생태계를 확장합니다.',
        'vision.phase3.title': 'Phase 3',
        'vision.phase3.subtitle': '글로벌 확장',
        'vision.phase3.description': '아시아를 넘어 글로벌 디지털 달러 허브가 됩니다.',
        'footer.platform.title': '플랫폼',
        'footer.platform.info': '토큰 정보',
        'footer.platform.exchange': '거래소',
        'footer.platform.staking': '스테이킹',
        'footer.platform.governance': 'DAO 거버넌스',
        'footer.support.title': '지원',
        'footer.support.faq': '도움말',
        'footer.support.contact': '문의하기',
        'footer.support.api_docs': 'API 문서',
        'footer.support.dev_guide': '개발자 가이드',
        'footer.company.title': '회사',
        'footer.company.about': '회사 소개',
        'footer.company.team': '팀',
        'footer.company.investors': '투자자',
        'footer.company.careers': '채용',
        'footer.legal.title': '법적 고지',
        'footer.legal.terms': '이용 약관',
        'footer.legal.privacy': '개인정보처리방침',
        'footer.legal.risk': '리스크 고지',
        'footer.legal.audit': '감사 보고서',
        'message.success': '✅ {usd} USD로 {usd} USDQS를 구매했습니다!',
        'message.error': '⚠️ 유효한 USD 금액을 입력해주세요.',
    },
    'en': {
        'menu.dashboard': 'Dashboard',
        'menu.buy': 'Buy',
        'menu.chart': 'Chart',
        'menu.features': 'Features',
        'menu.vision': 'Vision',
        'button.connect_wallet': 'Connect Wallet',
        'button.get_started': 'Get Started',
        'hero.subtitle': 'A New Standard for Global Finance',
        'hero.description': 'The innovative USDQS stablecoin platform based on quantum finance.\nSecuring an independent financial settlement system • Establishing a global digital reserve currency.\nNext-generation digital ecosystem trusted worldwide • Perfect asset backing • The beginning of global financial innovation.',
        'button.start_usdg': 'Get Started with USDQS',
        'button.learn_more': 'Learn More',
        'section.buy_usdg': 'Buy USDQS',
        'label.usd_amount': 'Enter USD Amount:',
        'button.buy': 'Buy',
        'section.price_trend': 'Price Trend',
        'section.dashboard': 'Live Dashboard',
        'dashboard.total_supply': 'Total Supply',
        'dashboard.initial_scale': 'Initial Issuance Scale',
        'dashboard.trading_volume': '24H Trading Volume',
        'dashboard.market_liquidity': 'Active Market Liquidity',
        'dashboard.asset_backing': 'Asset Backing Ratio',
        'dashboard.transparent_custody': 'Transparent Custody by Global Auditors',
        'dashboard.integrated_platforms': 'Integrated Platforms',
        'dashboard.partnership_ecosystem': 'Ecosystem with Diverse Partners',
        'section.features': ' Core Features',
        'feature.usd_backing.title': 'USD Based Backing',
        'feature.usd_backing.description': 'Secure collateralization of vast USD physical assets under HKMA certification',
        'feature.global_payment.title': 'Global Payment',
        'feature.global_payment.description': 'Integrated platform for global remittance, investment, and payment services',
        'feature.regulatory.title': 'Regulatory Compliance',
        'feature.regulatory.description': 'Full compliance with ODI regulations and securing international credibility',
        'feature.stability.title': 'Stability',
        'feature.stability.description': '1:1 USD pegging and real-time transparent audits',
        'feature.scalability.title': 'Scalability',
        'feature.scalability.description': 'Expanding beyond Asia to become a global digital dollar hub',
        'feature.mxly_integration.title': 'MXLY Integration',
        'feature.mxly_integration.description': 'Maximizing synergy by linking with MXLY tokens',
        'feature.quantum_security.title': 'Quantum-Resistant Security',
        'feature.quantum_security.description': 'Prevents hacking and tampering using quantum-resistant cryptographic technology and signatures',
        'feature.reliability.title': 'Reliability & Interoperability',
        'feature.reliability.description': 'Enhanced security and compatibility with blockchain wallets and exchanges via quantum security',
        'section.vision': ' Vision',
        'vision.phase1.title': 'Phase 1',
        'vision.phase1.subtitle': 'Stable Issuance',
        'vision.phase1.description': 'Securely issuing a Hong Kong-based USDQS stablecoin.',
        'vision.phase2.title': 'Phase 2',
        'vision.phase2.subtitle': 'Platform Integration',
        'vision.phase2.description': 'Expanding the USDQS ecosystem by linking with various financial products.',
        'vision.phase3.title': 'Phase 3',
        'vision.phase3.subtitle': 'Global Expansion',
        'vision.phase3.description': 'Becoming a global digital dollar hub beyond Asia.',
        'footer.platform.title': 'Platform',
        'footer.platform.info': 'Token Info',
        'footer.platform.exchange': 'Exchange',
        'footer.platform.whitepaper': 'Whitepaper',
        'footer.platform.vision': 'Vision',
        'footer.support.title': 'Support',
        'footer.support.faq': 'FAQ',
        'footer.support.contact': 'Contact Us',
        'footer.support.api_docs': 'API Docs',
        'footer.support.dev_guide': 'Developer Guide',
        'footer.company.title': 'Company',
        'footer.company.about': 'About Us',
        'footer.company.team': 'Team',
        'footer.company.investors': 'Investors',
        'footer.company.careers': 'Careers',
        'footer.legal.title': 'Legal Notice',
        'footer.legal.terms': 'Terms of Use',
        'footer.legal.privacy': 'Privacy Policy',
        'footer.legal.risk': 'Risk Notice',
        'footer.legal.audit': 'Audit Report',
        'message.success': '✅ You have purchased {usd} USDQS with {usd} USD!',
        'message.error': '⚠️ Please enter a valid USD amount.',
    }
};

let currentLang = 'ko';

function updateContent() {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(el => {
        const key = el.getAttribute('data-translate');
        if (translations[currentLang][key]) {
            el.textContent = translations[currentLang][key];
        }
    });

    const heroDescEl = document.querySelector('[data-translate="hero.description"]');
    if (heroDescEl) {
        const text = translations[currentLang]['hero.description'];
        heroDescEl.innerHTML = `<i>Where Stability Meets Innovation with Quantum Finance</i><br><br>${text.replace(/\n/g, '<br>')}`;
    }

    document.querySelector('h2 > .gradient-text').textContent = 'USDQS';
    document.querySelector('#hero h1 > .gradient-text').textContent = 'USDQS';
    document.querySelector('#usdg-amount').nextSibling.textContent = ' USDQS';
}

window.onload = function() {
    const languageSwitcher = document.getElementById('language-switcher');
    languageSwitcher.addEventListener('change', (event) => {
        currentLang = event.target.value;
        updateContent();
    });

    updateContent();

    const usdInput = document.getElementById('usd-amount');
    const usdgAmount = document.getElementById('usdg-amount');
    const buyButton = document.getElementById('buy-button');
    const messageBox = document.getElementById('message-box');

    usdInput.addEventListener('input', () => {
        const usd = usdInput.value;
        usdgAmount.textContent = usd || '0';
    });

    buyButton.addEventListener('click', () => {
        const usd = usdInput.value;
        if (usd > 0) {
            const successMessage = translations[currentLang]['message.success'].replace(/{usd}/g, usd);
            showMessage(successMessage, 'success');
        } else {
            const errorMessage = translations[currentLang]['message.error'];
            showMessage(errorMessage, 'error');
        }
    });

    function showMessage(message, type) {
        messageBox.textContent = message;
        messageBox.classList.remove('hidden', 'bg-red-900', 'text-red-300', 'bg-green-900', 'text-green-300');
        if (type === 'success') {
            messageBox.classList.add('bg-green-900', 'text-green-300');
        } else {
            messageBox.classList.add('bg-red-900', 'text-red-300');
        }
        messageBox.classList.remove('hidden');
        setTimeout(() => {
            messageBox.classList.add('hidden');
        }, 5000);
    }

    const ctx = document.getElementById('priceChart').getContext('2d');
    const data = {
        labels: ['1D', '7D', '1M', '3M', '6M', '1Y', 'All'],
        datasets: [{
            label: 'USDQS Price',
            data: [1.0001, 1.0002, 1.0000, 0.9999, 1.0003, 1.0001, 1.0000],
            borderColor: 'rgba(0, 255, 255, 0.7)',
            backgroundColor: 'rgba(0, 255, 255, 0.1)',
            borderWidth: 2,
            tension: 0.4,
            pointRadius: 0,
            fill: true
        }]
    };

    const config = {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(context.parsed.y);
                            }
                            return label;
                        }
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: 'white'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: 'white'
                    }
                }
            }
        }
    };
    const priceChart = new Chart(ctx, config);
    window.addEventListener('resize', () => {
        priceChart.resize();
    });
};